<div>
  <h2 class="titulo" mat-dialog-title>Asignar Tecnico - TICKET {{tiketSeleccionado}}</h2>

  <mat-dialog-content>
      <form class="ticket-form" [formGroup]="formAsignar">

        <div class="row g-2">
          <div class="mb-3">
            <label for="exInput1" class="form-label">Descripcion del Servicio</label>
            <textarea class="form-control" rows="5" [readonly]="true" formControlName="descripcion" placeholder="Detalle del servicio que solicita"></textarea>
          </div>
          <div class="mb-3 col-6">
            <label for="nitinput" class="form-label">Cliente</label>
            <select class="form-select" formControlName="id_cliente" aria-label="CLiente" [disabled]="true">
                <option *ngFor="let cliente of clientes" [value]="cliente.Id">{{cliente.Cliente}}</option>
            </select>
          </div>

          <div class="mb-3 col-2">
            <label for="clienteinput" class="form-label">Fecha</label>
            <input type="date" class="form-control" formControlName="fecha" [readonly]="true">
          </div>

          <div class="mb-3 col-2">
            <label for="exampleFormControlInput1" class="form-label">Hora</label>
            <input type="time" class="form-control" [readonly]="true" formControlName="hora" [value]="this.data.data.hora">
          </div>

          <div class="mb-3 col-2">
            <label for="prioridad" class="form-label">Prioridad</label>
            <select class="form-select" formControlName="prioridad" aria-label="prioridad" [disabled]="true">
              <option *ngFor="let priori of prioridad" [value]="priori.value" >{{priori.viewValue}}</option>
          </select>
          </div>

          <div class="mb-3 col-6">
            <label for="tipotiketinput" class="form-label">Tipo de Ticket</label>
            <select class="form-select" formControlName="tipo_tiket"
                  aria-label="Tipo Ticket" [disabled]="true">
                <option *ngFor="let tt of tipoTiket" [value]="tt.id">{{tt.descripcion}}</option>
            </select>
          </div>

          <div class="mb-3 col-6">
            <label for="exampleFormControlInput1" class="form-label">Tipo de Servicio</label>
            <select class="form-select" formControlName="id_tiposervicio"
                  aria-label="Tipo Servicio" [disabled]="true">
                <option *ngFor="let ts of tipoServ" [value]="ts.id">{{ts.TIPOSERVICIO}}</option>
            </select>
          </div>

          <div class="mb-3 col-12">
            <label for="exampleFormControlInput1" class="form-label">Servicio</label>
            <select class="form-select" formControlName="id_servicio" aria-label="Tipo Servicio" [disabled]="true">
                <option *ngFor="let serv of servicios" [value]="serv.id_servicio">{{serv.Descripcion}}</option>
            </select>
          </div>


          <div class="row">
            <h2>Tecnico Asignada</h2>
            <select class="form-select" formControlName="id_tecnico" aria-label="Tecnicos Disponibles" >
                <option *ngFor="let tecnico of tecnicos" [value]="tecnico.id">{{tecnico.nombre}}</option>
            </select>
          </div>

        </div>

        <!--mat-form-field class="example-full-width">
          <mat-label>Tiket</mat-label>
          <input matInput formControlName="id">
        </!--mat-form-field>

        <table class="example-full-width" cellspacing="0"><tr>
          <td>
            <mat-form-field>
              <mat-label>Fecha</mat-label>
              <input matInput [matDatepicker]="picker" formControlName="fecha">
              <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </td>
          <td><mat-form-field class="example-full-width">
            <mat-label>Hora</mat-label>
            <input matInput type="time" formControlName="hora">
          </mat-form-field></td>
          <td>
            <mat-form-field>
              <mat-label>Prioridad</mat-label>
              <mat-select formControlName="prioridad">
                @for (prior of prioridad; track prior) {
                  <mat-option [value]="prior.value">{{prior.viewValue}}</mat-option>
                }
              </mat-select>
            </mat-form-field>
          </td>
        </tr></table>

        <table class="example-full-width" cellspacing="0"><tr>
          <td>
            <mat-form-field>
              <mat-label>Tipo de Servicio</mat-label>
              <mat-select formControlName="id_tiposervicio" value="this.data.id_tiposervicio">
                @for (tiposrv of tipoServ; track tiposrv) {
                  <mat-option [value]="tiposrv.id_tiposervicio">{{tiposrv.TIPOSERVICIO}}</mat-option>
                }
              </mat-select>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field>
              <mat-label>Servicio  </mat-label>
              <mat-select formControlName="id_servicio">
                @for (srv of servicios; track srv) {
                  <mat-option [value]="srv.id_servicio">{{srv.Descripcion}}</mat-option>
                }
              </mat-select>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field>
              <mat-label>Tecnico Asignado</mat-label>
              <mat-select formControlName="id_tecnico">
                @for (tecnico of tecnicos; track tecnico) {
                  <mat-option [value]="tecnico.id">{{tecnico.nombre}}</mat-option>
                }
              </mat-select>
            </mat-form-field>
          </td>
        </tr></table>

        <div-- class="row">
            <mat-form-field class="example-full-width">
              <mat-label>Descripcion del Servicio</mat-label>
              <textarea matInput formControlName="descripcion" rows="4"
                        placeholder="Detalle del mantenimiento que solicita."></textarea>
            </mat-form-field>
        </div-->


      </form>

  </mat-dialog-content>

  <div mat-dialog-actions class="pie justify-content-end">
    <button mat-raised-button color="warn" (click)="cancelar()">Cancelar</button>
    <button mat-raised-button color="primary" (click)="grabar()" cdkFocusInitial>Confirmar</button>
  </div>
</div>
